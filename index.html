<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù„ÙˆØ­Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#0f172a;
  color:#fff;
  font-family:Arial;
  direction:rtl;
  padding:20px;
}
h1{text-align:center;margin-bottom:15px}

.stats{
  display:flex;
  gap:15px;
  justify-content:center;
  margin-bottom:20px;
}
.stat{
  padding:12px 18px;
  border-radius:14px;
}
.green{background:#16a34a}
.red{background:#dc2626}

.dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:20px;
}

.card{
  border-radius:16px;
  padding:16px;
  text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

.online{background:#16a34a}
.offline{background:#dc2626;animation:blink 1s infinite}
@keyframes blink{50%{opacity:.5}}

.name{font-size:17px;font-weight:bold}
.ip{font-size:14px;opacity:.9}
.time{font-size:12px;margin-top:6px}
</style>
</head>

<body>

<h1>ğŸ–¥ï¸ Ø´Ø§Ø´Ø© Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¬Ù‡Ø²Ø©</h1>

<div class="stats">
  <div class="stat green" id="onCount">ğŸŸ¢ ÙŠØ¹Ù…Ù„: 0</div>
  <div class="stat red" id="offCount">ğŸ”´ Ù…ØªÙˆÙ‚Ù: 0</div>
</div>

<div class="dashboard" id="dashboard"></div>

<script>
function loadStatus(){
  fetch("status.json?"+Date.now())
    .then(res => res.json())
    .then(devices => {
      const dash = document.getElementById("dashboard");
      dash.innerHTML = "";

      let on = 0, off = 0;

      devices.forEach(d => {
        d.status === "online" ? on++ : off++;

        const card = document.createElement("div");
        card.className = "card " + d.status;
        card.innerHTML = `
          <div class="name">${d.name}</div>
          <div class="ip">${d.ip}</div>
          <div>${d.status === "online" ? "ğŸŸ¢ ÙŠØ¹Ù…Ù„" : "ğŸ”´ Ù…ØªÙˆÙ‚Ù"}</div>
          <div class="time">${d.time}</div>
        `;
        dash.appendChild(card);
      });

      document.getElementById("onCount").innerText = "ğŸŸ¢ ÙŠØ¹Ù…Ù„: " + on;
      document.getElementById("offCount").innerText = "ğŸ”´ Ù…ØªÙˆÙ‚Ù: " + off;
    })
    .catch(() => {
      document.getElementById("dashboard").innerHTML =
        "<p style='text-align:center'>âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ status.json</p>";
    });
}

loadStatus();
setInterval(loadStatus,30000);
</script>

</body>
</html>
